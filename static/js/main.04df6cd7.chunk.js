(this["webpackJsonpflat-illustrator"]=this["webpackJsonpflat-illustrator"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n.n(c),r=n(8),o=n.n(r),s=(n(15),n(2)),l=n(5),u={IMAGE:"image",RECT:"rectangle",HIGHLIGHT:"highlight"},m=function(e,t){if(t.imgCache)return e.drawImage(t.imgCache,t.x,t.y,t.w,t.h),t;var n=new Image;return n.src=t.src,n.onload=function(){t.imgCache=n;var a=n.naturalHeight,c=n.naturalWidth;t.w=-1===t.w?c:t.w,t.h=-1===t.h?a:t.h,e.drawImage(n,t.x,t.y,t.w,t.h)},t},p=function(e,t){e.strokeRect(t.x,t.y,t.w,t.h)},d=function(e,t){switch(t.type){case u.IMAGE:return m(e,t);case u.HIGHLIGHT:return p(e,t);default:return t}};n(16);function f(e){var t=e.elements,n=void 0===t?[]:t,i=e.setElements,r=e.headerRef,o=(e.activeElement,e.setActiveElement),m=e.canvasRef,p=Object(c.useState)({x:0,y:0}),f=Object(s.a)(p,2),g=f[0],h=f[1],b=Object(c.useState)(-1),v=Object(s.a)(b,2),j=v[0],w=v[1];Object(c.useEffect)((function(){m.current.width=window.innerWidth-20,m.current.height=window.innerHeight-r.current.offsetHeight-20,m.current.style.margin="".concat(10,"px"),m.current.style.marginTop=r.current.offsetHeight+10+"px"}),[r,m]),Object(c.useEffect)((function(){var e=m.current.getContext("2d");e.clearRect(0,0,m.current.width,m.current.height),n.map((function(t,n){return t.active&&d(e,Object(l.a)(Object(l.a)({},t),{},{type:u.HIGHLIGHT})),d(e,t)}))}),[n,m]);return Object(a.jsx)("canvas",{width:"100vw",height:"100vh",id:"main-canvas",ref:m,onMouseDown:function(e){for(var t=e.pageX,a=e.pageY,c=t-m.current.offsetLeft,r=a-m.current.offsetTop,s=!1,l=[],u=n.length-1;u>=0;u--){var p=n[u];!s&&p.x<c&&c<p.x+p.w&&p.y<r&&r<p.y+p.h?(w(u),o(u),p.active=!0,s=!0):p.active=!1,l[u]=p}s?i(l):(w(-1),o(-1))},onMouseMove:function(e){if(-1!==j){var t=e.pageX,a=e.pageY,c=t-m.current.offsetLeft,r=a-m.current.offsetTop;if(g&&g.x&&g.y){var o=n.map((function(e,t){return t===j?Object(l.a)(Object(l.a)({},e),{},{x:e.x+c-g.x,y:e.y+r-g.y}):e}));i(o)}h({x:c,y:r})}},onMouseUp:function(){-1===j&&(n=n.map((function(e){return e.active=!1,e})),i(n)),w(-1),h({})}})}var g=n(4),h=n(9);n(17);function b(e){var t=e.elements,n=e.setElements,i=e.headerRef,r=e.activeElement,o=e.setActiveElement,s=e.canvasRef,l=Object(c.useRef)();return Object(a.jsxs)("div",{id:"header",ref:i,children:[Object(a.jsx)("span",{className:"vertical-center title-badge",children:"Sketch"}),Object(a.jsx)("input",{type:"file",hidden:!0,onChange:function(){var e=new FileReader;e.readAsDataURL(l.current.files[0]),e.onload=function(){return n((function(t){return[].concat(Object(g.a)(t),[{type:u.IMAGE,src:e.result,x:0,y:0,w:-1,h:-1}])}))}},accept:"image/x-png,image/gif,image/jpeg",ref:l}),Object(a.jsxs)("span",{className:"float-right vertical-center",children:[-1!==r?Object(a.jsxs)("span",{id:"actions",children:[Object(a.jsx)("span",{className:"hand small-text padding-x",onClick:function(){if(r!==t.length-1){var e=[t[r],t[r+1]];t[r+1]=e[0],t[r]=e[1],n(Object(g.a)(t))}},children:"Forward"}),Object(a.jsx)("span",{className:"hand small-text padding-x",onClick:function(){if(0!==r){var e=[t[r],t[r-1]];t[r-1]=e[0],t[r]=e[1],n(Object(g.a)(t))}},children:"Backward"}),"w: ",Object(a.jsx)("input",{type:"number",value:t[r].w,onChange:function(e){var a=t.map((function(t,n){return n===r&&(t.w=parseInt(e.target.value)),t}));n(a)}}),"h: ",Object(a.jsx)("input",{type:"number",value:t[r].h,onChange:function(e){var a=t.map((function(t,n){return n===r&&(t.h=parseInt(e.target.value)),t}));n(a)}}),Object(a.jsx)(h.a,{className:"hand",onClick:function(){n((function(e){var t=e.filter((function(e,t){return t!==r}));return Object(g.a)(t)})),o(-1)}})]}):null,Object(a.jsx)("button",{onClick:function(){l.current.click()},children:"Upload"}),Object(a.jsx)("button",{onClick:function(){console.log({canvasRef:s});var e=s.current.toDataURL("image/png");e=(e=e.replace(/^data:image\/[^;]*/,"data:application/octet-stream")).replace(/^data:application\/octet-stream/,"data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=Canvas.png"),window.href=e},children:"Download"})]})]})}var v=[{type:u.IMAGE,src:"https://www.pikpng.com/pngl/m/140-1409929_red-butterfly-png-image-background-transparent-background-png.png",x:0,y:0,w:-1,h:-1}];n(18);function j(){return Object(a.jsx)("span",{children:"App is not available on mobile devices yet"})}var w=function(){var e=Object(c.useState)(v),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(-1),o=Object(s.a)(r,2),l=o[0],u=o[1],m=Object(c.useRef)(),p=Object(c.useRef)();return Object(a.jsx)("div",{className:"App",children:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))?Object(a.jsx)(j,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b,{elements:n,setElements:i,headerRef:m,activeElement:l,setActiveElement:u,canvasRef:p}),Object(a.jsx)(f,{elements:n,setElements:i,headerRef:m,activeElement:l,setActiveElement:u,canvasRef:p})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),x()}},[[19,1,2]]]);
//# sourceMappingURL=main.04df6cd7.chunk.js.map